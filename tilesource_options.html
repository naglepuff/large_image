<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tile Source Options &mdash; large_image  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Configuration Options" href="config_options.html" />
    <link rel="prev" title="Large Image" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> large_image
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tile Source Options</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#format">Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="#encoding">Encoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="#edges">Edges</a></li>
<li class="toctree-l2"><a class="reference internal" href="#style">Style</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#swap-the-red-and-green-channels-of-a-three-color-image">Swap the red and green channels of a three color image</a></li>
<li class="toctree-l4"><a class="reference internal" href="#apply-a-gamma-correction-to-the-image">Apply a gamma correction to the image</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="config_options.html">Configuration Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="image_conversion.html">Image Conversion</a></li>
<li class="toctree-l1"><a class="reference internal" href="upgrade.html">Upgrading from Previous Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="large_image/modules.html">large_image</a></li>
<li class="toctree-l1"><a class="reference internal" href="large_image_source_bioformats/modules.html">large_image_source_bioformats</a></li>
<li class="toctree-l1"><a class="reference internal" href="large_image_source_deepzoom/modules.html">large_image_source_deepzoom</a></li>
<li class="toctree-l1"><a class="reference internal" href="large_image_source_dummy/modules.html">large_image_source_dummy</a></li>
<li class="toctree-l1"><a class="reference internal" href="large_image_source_gdal/modules.html">large_image_source_gdal</a></li>
<li class="toctree-l1"><a class="reference internal" href="large_image_source_mapnik/modules.html">large_image_source_mapnik</a></li>
<li class="toctree-l1"><a class="reference internal" href="large_image_source_nd2/modules.html">large_image_source_nd2</a></li>
<li class="toctree-l1"><a class="reference internal" href="large_image_source_ometiff/modules.html">large_image_source_ometiff</a></li>
<li class="toctree-l1"><a class="reference internal" href="large_image_source_openjpeg/modules.html">large_image_source_openjpeg</a></li>
<li class="toctree-l1"><a class="reference internal" href="large_image_source_openslide/modules.html">large_image_source_openslide</a></li>
<li class="toctree-l1"><a class="reference internal" href="large_image_source_pil/modules.html">large_image_source_pil</a></li>
<li class="toctree-l1"><a class="reference internal" href="large_image_source_test/modules.html">large_image_source_test</a></li>
<li class="toctree-l1"><a class="reference internal" href="large_image_source_tiff/modules.html">large_image_source_tiff</a></li>
<li class="toctree-l1"><a class="reference internal" href="large_image_converter/modules.html">large_image_converter</a></li>
<li class="toctree-l1"><a class="reference internal" href="large_image_tasks/modules.html">large_image_tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="girder_large_image/modules.html">girder_large_image</a></li>
<li class="toctree-l1"><a class="reference internal" href="girder_large_image_annotation/modules.html">girder_large_image_annotation</a></li>
<li class="toctree-l1"><a class="reference internal" href="annotations.html">Annotation Schema</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Developer Guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">large_image</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Tile Source Options</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/tilesource_options.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="tile-source-options">
<h1>Tile Source Options<a class="headerlink" href="#tile-source-options" title="Permalink to this headline">¶</a></h1>
<p>Each tile source can have custom options that affect how tiles are generated from that tile source.  All tile sources have a basic set of options:</p>
<section id="format">
<h2>Format<a class="headerlink" href="#format" title="Permalink to this headline">¶</a></h2>
<p>Python tile functions can return tile data as images, numpy arrays, or PIL Image objects.  The <code class="docutils literal notranslate"><span class="pre">format</span></code> parameter is one of the <code class="docutils literal notranslate"><span class="pre">TILE_FORMAT_*</span></code> constants.</p>
</section>
<section id="encoding">
<h2>Encoding<a class="headerlink" href="#encoding" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">encoding</span></code> parameter can be one of <code class="docutils literal notranslate"><span class="pre">JPEG</span></code>, <code class="docutils literal notranslate"><span class="pre">PNG</span></code>, <code class="docutils literal notranslate"><span class="pre">TIFF</span></code>, or <code class="docutils literal notranslate"><span class="pre">JFIF</span></code>.  When the tile is output as an image, this is the preferred format.  Note that <code class="docutils literal notranslate"><span class="pre">JFIF</span></code> is a specific variant of <code class="docutils literal notranslate"><span class="pre">JPEG</span></code> that will always use either the Y or YCbCr color space as well as constraining other options.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">encoding</span></code> only affects output when <code class="docutils literal notranslate"><span class="pre">format</span></code> is <code class="docutils literal notranslate"><span class="pre">TILE_FORMAT_IMAGE</span></code>.</p>
<p>Associated with <code class="docutils literal notranslate"><span class="pre">encoding</span></code>, some image formats have additional parameters.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">JPEG</span></code> and <code class="docutils literal notranslate"><span class="pre">JFIF</span></code> can specify <code class="docutils literal notranslate"><span class="pre">jpegQuality</span></code>, a number from 0 to 100 where 0 is small and 100 is higher-quality, and <code class="docutils literal notranslate"><span class="pre">jpegSubsampling</span></code>, where 0 is full chrominance data, 1 is half-resolution chrominance, and 2 is quarter-resolution chrominance.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TIFF</span></code> can specify <code class="docutils literal notranslate"><span class="pre">tiffCompression</span></code>, which is one of the <code class="docutils literal notranslate"><span class="pre">libtiff_ctypes.COMPRESSION*</span></code> options.</p></li>
</ul>
</section>
<section id="edges">
<h2>Edges<a class="headerlink" href="#edges" title="Permalink to this headline">¶</a></h2>
<p>When a tile is requested at the right or bottom edge of the image, the tile could extend past the boundary of the image.  If the image is not an even multiple of the tile size, the <code class="docutils literal notranslate"><span class="pre">edge</span></code> parameter determines how the tile is generated.  A value of <code class="docutils literal notranslate"><span class="pre">None</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code> will generate a standard sized tile where the area outside of the image space could have pixels of any color.  An <code class="docutils literal notranslate"><span class="pre">edge</span></code> value of <code class="docutils literal notranslate"><span class="pre">'crop'</span></code> or <code class="docutils literal notranslate"><span class="pre">True</span></code> will return a tile that is smaller than the standard size.  A value if the form of a hexadecimal encoded 8-bit-per-channel color (e.g., <code class="docutils literal notranslate"><span class="pre">#rrggbb</span></code>) will ensure that the area outside of the image space is all that color.</p>
</section>
<section id="style">
<h2>Style<a class="headerlink" href="#style" title="Permalink to this headline">¶</a></h2>
<p>Often tiles are desired as 8-bit-per-sample images.  However, if the tile source is more than 8 bits per sample or has more than 3 channels, some data will be lost.  Similarly, if the data is returned as a numpy array, the range of values returned can vary by tile source.  The <code class="docutils literal notranslate"><span class="pre">style</span></code> parameter can remap samples values and determine how channels are composited.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">style</span></code> is not specified or None, the default style for the file is used.  Otherwise, this is a json-encoded string that contains an object with a key of <code class="docutils literal notranslate"><span class="pre">bands</span></code> consisting of an array of band definitions.  If only one band is needed, a json-encoded string of just the band definition can be used.</p>
<p>A band definition is an object which can contain the following keys:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">band</span></code>: if -1 or None, the greyscale value is used.  Otherwise, a 1-based numerical index into the channels of the image or a string that matches the interpretation of the band (‘red’, ‘green’, ‘blue’, ‘gray’, ‘alpha’).  Note that ‘gray’ on an RGB or RGBA image will use the green band.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">frame</span></code>: if specified, override the frame parameter used in the tile query for this band.  Note that it is more efficient to have at least one band not specify a frame parameter or use the same value as the basic query.  Defaults to the frame value of the core query.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framedelta</span></code>: if specified, and <code class="docutils literal notranslate"><span class="pre">frame</span></code> is not specified, override the frame parameter used in the tile query for this band by adding the value to the current frame number.  If many different frames are being requested, all with the same <code class="docutils literal notranslate"><span class="pre">framedelta</span></code>, this is more efficient than varying the <code class="docutils literal notranslate"><span class="pre">frame</span></code> within the style.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">min</span></code>: the value to map to the first palette value.  Defaults to 0.  ‘auto’ to use 0 if the reported minimum and maximum of the band are between [0, 255] or use the reported minimum otherwise.  ‘min’ or ‘max’ to always uses the reported minimum or maximum.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max</span></code>: the value to map to the last palette value.  Defaults to 255.  ‘auto’ to use 0 if the reported minimum and maximum of the band are between [0, 255] or use the reported maximum otherwise.  ‘min’ or ‘max’ to always uses the reported minimum or maximum.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">palette</span></code>: a list of two or more color strings, where color strings are of the form #RRGGBB, #RRGGBBAA, #RGB, #RGBA.  The values between min and max are interpolated using a piecewise linear algorithm to map to the specified palette values.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nodata</span></code>: the value to use for missing data.  null or unset to not use a nodata value.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">composite</span></code>: either ‘lighten’ or ‘multiply’.  Defaults to ‘lighten’ for all except the alpha band.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">clamp</span></code>: either True to clamp (also called clip or crop) values outside of the [min, max] to the ends of the palette or False to make outside values transparent.</p></li>
</ul>
<p>Note that some tile sources add additional options to the <code class="docutils literal notranslate"><span class="pre">style</span></code> parameter.</p>
<section id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h3>
<section id="swap-the-red-and-green-channels-of-a-three-color-image">
<h4>Swap the red and green channels of a three color image<a class="headerlink" href="#swap-the-red-and-green-channels-of-a-three-color-image" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;bands&quot;</span><span class="p">:</span> <span class="p">[</span>
  <span class="p">{</span><span class="s2">&quot;band&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;palette&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;#000&quot;</span><span class="p">,</span> <span class="s2">&quot;#0f0&quot;</span><span class="p">]},</span>
  <span class="p">{</span><span class="s2">&quot;band&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;palette&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;#000&quot;</span><span class="p">,</span> <span class="s2">&quot;#f00&quot;</span><span class="p">]},</span>
  <span class="p">{</span><span class="s2">&quot;band&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;palette&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;#000&quot;</span><span class="p">,</span> <span class="s2">&quot;#00f&quot;</span><span class="p">]}</span>
<span class="p">]}</span>
</pre></div>
</div>
</section>
<section id="apply-a-gamma-correction-to-the-image">
<h4>Apply a gamma correction to the image<a class="headerlink" href="#apply-a-gamma-correction-to-the-image" title="Permalink to this headline">¶</a></h4>
<p>This used a precomputed sixteen entry greyscale palette, computed as <code class="docutils literal notranslate"><span class="pre">(value</span> <span class="pre">/</span> <span class="pre">255)</span> <span class="pre">**</span> <span class="pre">gamma</span> <span class="pre">*</span> <span class="pre">255</span></code>, where <code class="docutils literal notranslate"><span class="pre">value</span></code> is one of [0, 17, 34, 51, 68, 85, 102, 119, 136, 153, 170, 187, 204, 221, 238, 255] and gamma is <code class="docutils literal notranslate"><span class="pre">0.5</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;palette&quot;</span><span class="p">:</span> <span class="p">[</span>
  <span class="s2">&quot;#000000&quot;</span><span class="p">,</span> <span class="s2">&quot;#414141&quot;</span><span class="p">,</span> <span class="s2">&quot;#5D5D5D&quot;</span><span class="p">,</span> <span class="s2">&quot;#727272&quot;</span><span class="p">,</span>
  <span class="s2">&quot;#838383&quot;</span><span class="p">,</span> <span class="s2">&quot;#939393&quot;</span><span class="p">,</span> <span class="s2">&quot;#A1A1A1&quot;</span><span class="p">,</span> <span class="s2">&quot;#AEAEAE&quot;</span><span class="p">,</span>
  <span class="s2">&quot;#BABABA&quot;</span><span class="p">,</span> <span class="s2">&quot;#C5C5C5&quot;</span><span class="p">,</span> <span class="s2">&quot;#D0D0D0&quot;</span><span class="p">,</span> <span class="s2">&quot;#DADADA&quot;</span><span class="p">,</span>
  <span class="s2">&quot;#E4E4E4&quot;</span><span class="p">,</span> <span class="s2">&quot;#EDEDED&quot;</span><span class="p">,</span> <span class="s2">&quot;#F6F6F6&quot;</span><span class="p">,</span> <span class="s2">&quot;#FFFFFF&quot;</span>
<span class="p">]}</span>
</pre></div>
</div>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Large Image" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="config_options.html" class="btn btn-neutral float-right" title="Configuration Options" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Kitware, Inc..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>